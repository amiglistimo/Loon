# DingTalk 去广告 — Egern 模块配置
# 去除钉钉 iOS 开屏广告 & 内容广告
# 作者：amiglistimo
# 日期：2026-02-27

name: "DingTalk 去广告"
desc: "去除钉钉 iOS 开屏广告 & 内容广告"
author: "amiglistimo"
icon: "https://raw.githubusercontent.com/Orz-3/mini/refs/heads/master/Color/dingtalk.png"

rules:
  - domain_keyword: "h5-advertise"
    policy: reject
    description: "阻断广告 H5 域名"

  - url_regex: "^https?://n\\.dingtalk\\.com/dingding/h5-advertise/"
    policy: reject
    description: "阻断广告 H5 资源路径"

scripts:
  - name: "DingTalk 移除广告配置"
    type: http-response
    pattern: "^https?://n\\.dingtalk\\.com/dingtalk-static/offline-package/resource_package_app_config.*\\.json"
    script_path: "https://raw.githubusercontent.com/amiglistimo/Loon/refs/heads/main/Script/DingTalk_remove_ads.js"
    require_body: true
    timeout: 15

mitm:
  hostnames:
    - "n.dingtalk.com"
